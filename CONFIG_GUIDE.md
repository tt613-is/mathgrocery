# 📝 配置页面使用指南 (方案B)

## 🎯 简介

这是**图形化配置页面**，让你可以通过**表单和按钮**轻松修改游戏的所有设置，无需直接编辑代码或JSON文件。

适合：**所有用户**，特别是不熟悉JSON格式的用户。

---

## 🚀 快速开始

### 1. 启动配置页面

#### 方法A：使用本地服务器（推荐）
```bash
# 在终端中进入项目目录
cd /Users/WesleyBao/Documents/Workspace/Web/MathGroccery

# 启动Python服务器
python3 -m http.server 8080

# 在浏览器打开
# http://localhost:8080/config.html
```

#### 方法B：直接双击打开
- 找到 `config.html` 文件
- 双击用浏览器打开
- ⚠️ **注意**：这种方式可能无法加载JSON文件，建议使用方法A

---

## 📐 界面布局

```
┌──────────────────────────────────────────────────────────┐
│  Math Grocery - 配置页面                    💾 保存 📤 导出│
├─────────┬──────────────────────────┬──────────────────────┤
│         │                          │                      │
│ 货架列表  │    编辑表单区域           │   实时预览窗口        │
│ (20%)   │    (50%)                 │   (30%)             │
│         │                          │                      │
│ ☑ 甜甜圈C区│  名称: [甜甜圈C区]         │  ┌───────────────┐  │
│  甜甜圈B区 │  ID:   [donut-top]       │  │   🍩🍩🍩      │  │
│  甜甜圈A区 │  位置: Left [0]          │  │   $2.75      │  │
│  零食角   │       Top [8vh]          │  │              │  │
│  水果台   │  尺寸: Width [120px]      │  └───────────────┘  │
│  ...     │       Height [20vh]      │                      │
│         │  商品: 🍩🍩🍩 选择...       │                      │
│ [+ 新增] │  价格: [$2.75]            │                      │
│         │                          │                      │
└─────────┴──────────────────────────┴──────────────────────┘
```

---

## 🛠 功能详解

### 一、货架列表（左侧）

#### 1. 选择货架
- **点击**货架名称，左侧高亮，右侧显示详细信息
- 显示内容：货架名称 + 类型标签

#### 2. 添加新货架
- 点击底部 **[+ 新增货架]** 按钮
- 填写新货架的基本信息
- 系统自动生成唯一ID

---

### 二、编辑表单（中间）

#### 1. 基本信息
| 字段 | 说明 | 示例 |
|------|------|------|
| 名称 | 货架显示名称 | `甜甜圈C区` |
| ID   | 唯一标识符（不可重复） | `donut-top` |
| 类型 | 货架类型标签 | `donut-shelf` |

#### 2. 位置设置
支持4种定位方式（至少选择2个）：

| 属性 | 说明 | 单位 | 示例 |
|------|------|------|------|
| Left | 距离左边距离 | px, vh, vw, % | `0`, `10px`, `5vw` |
| Right | 距离右边距离 | px, vh, vw, % | `20px` |
| Top | 距离顶部距离 | px, vh, vw, % | `8vh` |
| Bottom | 距离底部距离 | px, vh, vw, % | `0` |

**定位组合规则：**
- `left + top` - 从左上角定位
- `right + top` - 从右上角定位
- `left + bottom` - 从左下角定位
- `right + bottom` - 从右下角定位

#### 3. 尺寸设置
| 属性 | 说明 | 单位 | 示例 |
|------|------|------|------|
| Width | 宽度 | px, vh, vw, % | `120px`, `15vw` |
| Height | 高度 | px, vh, vw, % | `20vh`, `200px` |

#### 4. 布局类型
| 类型 | 说明 | 适用场景 |
|------|------|----------|
| `vertical` | 垂直排列 | 甜甜圈塔 |
| `grid` | 网格布局 | 零食角（需设置行列数） |
| `rows` | 分层展示 | 水果台 |
| `scattered` | 散列布局 | 海鲜冰柜 |
| `mixed` | 混合布局 | 肉类冰柜 |

**Grid布局额外设置：**
- 行数 (Rows): `2`
- 列数 (Cols): `3`

#### 5. 商品选择器
- 点击商品表情符号添加到货架
- 再次点击移除商品
- 显示已选商品数量
- 支持添加多个相同商品

**示例：**
```
可选商品: 🍭 🍎 🍩 🍟 🍊 🥛 🥩 🐟 🍗

已选商品: 🍩 🍩 🍩 (3个)
```

#### 6. 价格标签设置

##### 简单格式（适合单一商品）
```
☑ 显示价格标签
价格: [$2.75]
位置: [right]
```

##### 复杂格式（适合多种商品）
```
☑ 显示价格标签
商品名: [Snacks]

商品列表:
  - Lollipop: $0.50
  - Chips: $1.20

单位: [each]
折扣: [2 Lollipops for $0.90]
```

#### 7. 删除货架
- 点击底部红色 **[🗑️ 删除货架]** 按钮
- 确认后删除当前货架

---

### 三、实时预览（右侧）

- 自动显示当前编辑货架的样式
- 实时更新位置、尺寸、商品
- 显示价格标签效果

---

## 💾 保存与导出

### 1. 保存配置（浏览器本地）
- 点击顶部 **[💾 保存]** 按钮
- 配置保存到浏览器的LocalStorage
- 下次打开自动加载

### 2. 导出JSON文件
- 点击顶部 **[📤 导出JSON]** 按钮
- 下载 `game-config.json` 文件
- 可以备份或分享给他人

### 3. 加载JSON文件
- 点击顶部 **[📂 加载JSON]** 按钮
- 选择 `game-config.json` 文件
- 覆盖当前配置

### 4. 重置配置
- 点击顶部 **[🔄 重置]** 按钮
- 恢复到默认配置
- 丢失所有未保存的修改

### 5. 预览游戏
- 点击顶部 **[▶️ 预览游戏]** 按钮
- 在新窗口打开游戏
- 使用当前编辑的配置

---

## 📋 常见操作示例

### 示例1：调整甜甜圈区域位置
1. 左侧点击 **甜甜圈C区**
2. 修改 **Top** 值：从 `8vh` 改为 `10vh`
3. 右侧预览立即更新
4. 点击 **保存** 或 **导出JSON**

### 示例2：修改商品数量
1. 左侧点击 **零食角**
2. 在商品选择器中点击 `🍭` 4次（添加4个棒棒糖）
3. 点击 `🍟` 2次（添加2个薯片）
4. 右侧预览显示新的商品排列
5. 点击 **保存**

### 示例3：更改价格
1. 左侧点击 **甜甜圈C区**
2. 价格标签部分，修改价格为 `$3.00`
3. 右侧预览显示新价格
4. 点击 **保存**

### 示例4：新增货架区域
1. 点击左侧底部 **[+ 新增货架]**
2. 填写信息：
   - 名称: `饮料区`
   - ID: `drinks-area`
   - 位置: Left `300px`, Top `30vh`
   - 尺寸: Width `150px`, Height `25vh`
   - 布局: `grid`, 行2 列2
   - 商品: 选择 🥛 🥛 🥛 🥛
   - 价格: `$1.50`
3. 点击 **保存**
4. 新货架出现在列表中

### 示例5：导出配置到游戏
1. 完成所有修改
2. 点击 **[📤 导出JSON]**
3. 下载 `game-config.json` 文件
4. 将文件放到游戏目录
5. 刷新游戏页面，看到新配置生效

---

## ⚠️ 注意事项

### 1. 保存机制
- **浏览器本地保存**：只保存在当前浏览器，不影响游戏文件
- **导出JSON**：才会生成实际的配置文件

### 2. 配置同步
- 修改配置后，需要 **导出JSON** 并 **替换游戏目录的JSON文件**
- 游戏启动时会读取 `game-config.json`

### 3. ID唯一性
- 每个货架的ID必须唯一
- 系统会自动检查重复ID

### 4. 单位格式
- 位置/尺寸支持：`px`, `vh`, `vw`, `%`
- 必须带单位，如 `120px` 或 `20vh`

### 5. 浏览器兼容性
- 推荐使用 **Chrome、Safari、Firefox** 最新版本
- 需要启用JavaScript

---

## 🔧 故障排除

### 问题1：配置页面无法加载JSON文件
**解决方法：**
- 确保使用本地服务器启动（`python3 -m http.server 8080`）
- 不要直接双击打开HTML文件

### 问题2：保存后游戏没有变化
**解决方法：**
- 点击 **[📤 导出JSON]** 下载配置文件
- 将下载的 `game-config.json` 替换游戏目录中的同名文件
- 刷新游戏页面（Cmd+R 或 Ctrl+R）

### 问题3：预览窗口显示不正确
**解决方法：**
- 刷新配置页面
- 重新选择货架
- 检查浏览器控制台（F12）是否有错误

### 问题4：添加的商品显示不出来
**解决方法：**
- 检查商品ID是否存在于商品库
- 确保货架布局类型正确（grid需要设置行列数）
- 检查货架尺寸是否足够大

---

## 💡 高级技巧

### 1. 快速复制货架
1. 选择要复制的货架
2. 点击 **[📤 导出JSON]**
3. 打开JSON文件，复制该货架的配置
4. 点击 **[+ 新增货架]**，粘贴并修改ID

### 2. 批量调整位置
1. 导出JSON文件
2. 使用文本编辑器批量替换（参考JSON_GUIDE.md）
3. 重新加载JSON文件

### 3. 备份配置
定期点击 **[📤 导出JSON]** 并保存到其他位置，避免误操作丢失配置。

---

## 📞 需要帮助？

如果配置页面无法满足你的需求，请参考：
- **JSON直接编辑指南**：`JSON_GUIDE.md`（方案A）
- 这种方式可以实现更精细的控制

---

## ✨ 小贴士

- 每次修改后先点 **[▶️ 预览游戏]** 查看效果，再保存
- 使用 **浏览器的书签** 快速访问配置页面
- 可以用配置页面查看当前配置，即使不做修改
- 右侧预览窗口可以帮助你快速判断货架是否重叠

祝你配置愉快！🎉
