# Math Grocery - 数学杂货店游戏

## 🎮 项目简介

一个帮助练习心算的网页小游戏。玩家扮演杂货店老板，需要快速计算找零金额，提升数学计算能力。

**核心玩法：**
- 顾客购买商品
- 系统显示总价和支付金额
- 玩家计算并输入找零
- 系统判断对错并显示顾客反馈

## 🚀 快速开始

直接用浏览器打开 `index.html` 即可开始游戏。

## ✨ 当前功能（v0.1.0 MVP）

- [x] 固定商品库（11种商品，支持小数价格）
- [x] 随机生成订单（2-3个商品）
- [x] 自动计算总价
- [x] 顾客随机支付金额（总价+1~5元）
- [x] 玩家输入找零
- [x] 对错判断和表情反馈（😊/😡）
- [x] "再来一单"继续游戏

## 🛠 技术栈

- **纯 HTML/CSS/JavaScript** - 无框架依赖
- **单文件架构** - 所有代码在 index.html 中
- **响应式设计** - 适配移动端和桌面端

## 📝 开发决策记录

### 2025-01-02 - 项目初始化

**为什么选择单文件架构？**
- 便于部署：双击即可运行，无需服务器
- 降低复杂度：MVP阶段无需构建工具
- 易于分享：单个HTML文件即可传播

**为什么使用小数价格？**
- 更贴近真实购物场景
- 增加计算难度和趣味性
- 使用toFixed(2)处理浮点数精度问题

**商品定价策略：**
- 价格范围：$0.5-$56.3
- 甜甜圈有A/B/C三种型号，价格不同
- 支持小数点后最多2位
- 顾客支付金额 = 总价 + 随机(1-5)美元，保证有找零

### 2025-01-02 - 价格系统更新

**更新商品库：**
- 从6种商品扩展到11种商品
- 新增鸡腿商品
- 甜甜圈分为A/B/C三种型号，增加多样性

**支持小数价格：**
- 棒棒糖 $0.5（MVP阶段暂不支持数量优惠）
- 甜甜圈A/B/C分别为 $2/$2.5/$2.7
- 薯片 $1.2
- 肉/鱼/鸡腿 $56.3（高价商品增加难度）

**浮点数精度处理：**
- 所有价格计算使用 `toFixed(2)` 保留两位小数
- 比较答案时也使用 `toFixed(2)` 避免精度问题
- 确保显示和计算的一致性

## 🎯 代码结构

### 核心数据
```javascript
products = [
  { name: "苹果", emoji: "🍎", price: 1 },
  { name: "甜甜圈A", emoji: "🍩", price: 2 },
  { name: "甜甜圈B", emoji: "🍩", price: 2.5 },
  { name: "甜甜圈C", emoji: "🍩", price: 2.7 },
  { name: "肉", emoji: "🥩", price: 56.3 },
  { name: "鱼", emoji: "🐟", price: 56.3 },
  { name: "鸡腿", emoji: "🍗", price: 56.3 },
  { name: "Milk", emoji: "🥛", price: 5 },
  { name: "薯片", emoji: "🍟", price: 1.2 },
  { name: "橡皮", emoji: "🧽", price: 3 },
  { name: "棒棒糖", emoji: "🍭", price: 0.5 }
]
```

### 核心函数
- `generateOrder()` - 随机生成订单
- `displayOrder()` - 渲染订单界面
- `checkAnswer()` - 验证找零是否正确
- `nextRound()` - 开始下一轮游戏

## 🗺 后续迭代计划

### v0.2.0 - 游戏性增强
- [ ] 计分系统（连续答对次数）
- [ ] 倒计时功能（增加紧张感）
- [ ] 显示正确答案（答错时）

### v0.3.0 - 难度系统
- [ ] 简单模式：整数价格，2个商品
- [ ] 普通模式：整数价格，3-4个商品
- [ ] 困难模式：小数价格，4-5个商品

### v0.4.0 - 用户体验
- [ ] 本地存储最高分
- [ ] 动画效果优化
- [ ] 音效反馈

### 未来想法
- [ ] 多人对战模式
- [ ] 每日挑战
- [ ] 成就系统

## 🤖 AI 协作提示

**给 Claude 的上下文：**
- 这是一个单人开发的教育小游戏项目
- 所有代码在 `index.html` 中
- 文档策略：claude.md 替代 README（同时服务于用户和AI）
- Git 工作流：功能完成后统一提交

**开发原则：**
- MVP 优先，功能极简
- 代码清晰，注释完整
- 每次提交都更新文档

**当前待办事项：**
查看 todo list 了解当前任务进度

## 📚 参考资源

- [JavaScript 浮点数精度问题](https://0.30000000000000004.com/)
- [Keep a Changelog](https://keepachangelog.com/)

## 📄 许可

个人学习项目，欢迎参考和使用。
